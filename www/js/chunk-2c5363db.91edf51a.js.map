{"version":3,"sources":["webpack:///./src/views/Login.vue?58c5","webpack:///./src/views/Login.vue?60be","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?f597","webpack:///./src/views/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","login","rules","nativeOn","$event","preventDefault","loading","model","value","callback","$$v","$set","expression","slot","staticStyle","on","submit","reset","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2c5363db.91edf51a.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=79564dba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=79564dba&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"layout\"},[_c('div',{staticClass:\"header\"},[_vm._v(\"资源管理 - 登录\")]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.login,\"rules\":_vm.rules},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用户名\",\"disabled\":_vm.loading},model:{value:(_vm.login.username),callback:function ($$v) {_vm.$set(_vm.login, \"username\", $$v)},expression:\"login.username\"}},[_c('template',{slot:\"prepend\"},[_c('i',{staticClass:\"el-icon-user\"})])],2)],1),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"12px\"},attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\",\"disabled\":_vm.loading,\"show-password\":\"\"},model:{value:(_vm.login.password),callback:function ($$v) {_vm.$set(_vm.login, \"password\", $$v)},expression:\"login.password\"}},[_c('template',{slot:\"prepend\"},[_c('i',{staticClass:\"el-icon-lock\"})])],2)],1),_c('div',{staticStyle:{\"margin-bottom\":\"12px\",\"text-align\":\"right\"}},[_c('router-link',{staticStyle:{\"color\":\"#409EFF\"},attrs:{\"to\":\"/files\"}},[_vm._v(\"文件中转\")])],1),_c('el-form-item',[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-button',{staticClass:\"full-width\",attrs:{\"type\":\"primary\",\"native-type\":\"submit\",\"loading\":_vm.loading},on:{\"click\":function($event){return _vm.submit('form')}}},[_vm._v(\"登录\")])],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-button',{staticClass:\"full-width\",attrs:{\"disabled\":_vm.loading},on:{\"click\":function($event){return _vm.reset('form')}}},[_vm._v(\"重置\")])],1)],1)],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"login\">\r\n        <div class=\"layout\">\r\n            <div class=\"header\">资源管理 - 登录</div>\r\n            <el-form :model=\"login\" :rules=\"rules\" ref=\"form\" @submit.native.prevent>\r\n                <el-form-item prop=\"username\">\r\n                    <el-input v-model=\"login.username\" placeholder=\"请输入用户名\" :disabled=\"loading\">\r\n                        <template slot=\"prepend\">\r\n                            <i class=\"el-icon-user\"></i>\r\n                        </template>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"password\" style=\"margin-bottom:12px\">\r\n                    <el-input v-model=\"login.password\" type=\"password\" placeholder=\"请输入密码\" :disabled=\"loading\" show-password>\r\n                        <template slot=\"prepend\">\r\n                            <i class=\"el-icon-lock\"></i>\r\n                        </template>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <div style=\"margin-bottom: 12px; text-align:right\"><router-link to=\"/files\" style=\"color:#409EFF\">文件中转</router-link></div>\r\n                <el-form-item>\r\n                    <el-row :gutter=\"10\">\r\n                        <el-col :span=\"12\">\r\n                            <el-button class=\"full-width\" type=\"primary\" native-type=\"submit\" :loading=\"loading\" @click=\"submit('form')\">登录</el-button>\r\n                        </el-col>\r\n                        <el-col :span=\"12\">\r\n                            <el-button class=\"full-width\" @click=\"reset('form')\" :disabled=\"loading\">重置</el-button>\r\n                        </el-col>\r\n                    </el-row>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style scoped>\r\n.login .layout {\r\n    position: absolute;\r\n    background: #fff;\r\n    width: 400px;\r\n    padding: 25px 25px 0;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    border-radius: 5px;\r\n    box-shadow: 2px 2px 15px 0 rgba(0, 0, 0, .15);\r\n}\r\n\r\n.login .layout .header {\r\n    font-size: 25px;\r\n    margin-bottom: 25px;\r\n    text-align: center;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { login } from '@/libs/request';\r\nimport { userLogin, getLimit, setCookie } from '@/libs/auth';\r\n\r\nexport default {\r\n    data: () => ({\r\n        login: {\r\n            username: '',\r\n            password: ''\r\n        },\r\n        rules: {\r\n            username: [\r\n                { required: true, message: '用户名不能为空', trigger: 'blur' }\r\n            ],\r\n            password: [\r\n                { required: true, message: '密码不能为空', trigger: 'blur' }\r\n            ],\r\n        },\r\n        loading: false,\r\n    }),\r\n    methods: {\r\n        submit(form) {\r\n            this.$refs[form].validate(valid => {\r\n                if(!valid) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    this.toLogin()\r\n                }\r\n            })\r\n        },\r\n        toLogin() {\r\n            this.loading = true;\r\n            login(this.login, {\r\n                success: res => {\r\n                    let { token, token_type, user } = res;\r\n                    let { id, username, role } = user; // `${token_type} ${token}`\r\n                    const isAdmin = role === 'admin';\r\n                    let limit = isAdmin ? 1000 :( role === \"uploader\"? 200 :50 );\r\n                    setCookie({ username, id, limit, token, tokentype: token_type });\r\n                    this.$store.commit('setUserName', username);\r\n                    this.$store.commit('setUserLimit', limit);\r\n                    let path = '/index/';\r\n                    if(isAdmin || role === \"uploader\") {\r\n                        let { redirect } = this.$route.query;\r\n                        if(redirect) {\r\n                            path = redirect;\r\n                        }\r\n                    }\r\n                    else {\r\n                        path = '/proj'\r\n                    }\r\n                    this.$router.push(path);\r\n                },\r\n                fail: err => {\r\n                    this.$message.error(err);\r\n                    this.loading = false;\r\n                }\r\n            })\r\n        },\r\n        reset(form) {\r\n            this.$refs[form].resetFields();\r\n        }\r\n    },\r\n    created() {\r\n        const limit = getLimit();\r\n        if(userLogin()) {\r\n            this.$router.push(limit > 100 ? '/index/' : '/proj')\r\n        }\r\n    },\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=79564dba&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=79564dba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"79564dba\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}