(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2937903c"],{"11e9":function(e,t,r){var n=r("52a7"),i=r("4630"),a=r("6821"),s=r("6a99"),o=r("69a8"),l=r("c69a"),c=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?c:function(e,t){if(e=a(e),t=s(t,!0),l)try{return c(e,t)}catch(r){}if(o(e,t))return i(!n.f.call(e,t),e[t])}},1511:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user"},[r("div",{staticClass:"actions",attrs:{title:"添加用户"}},[r("el-button",{attrs:{type:"success",icon:"el-icon-folder-add"},on:{click:e.addUser}},[e._v("添加用户")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"full-width",attrs:{data:e.users,stripe:"",border:""}},[e._l(e.columns,(function(t,n){return r("el-table-column",{key:n,attrs:{prop:t.name,label:t.title,width:t.width,"min-width":t.minWidth},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v("\n                "+e._s(t.format?t.format(r.row[t.name]):""===r.row[t.name]?"未设置":r.row[t.name])+"\n            ")]}}],null,!0)})})),r("el-table-column",{attrs:{label:"操作","min-width":"120",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",title:"编辑",icon:"el-icon-edit"},on:{click:function(r){return e.editUser(t.row)}}}),"admin"!==t.row.role&&e.limit>200?r("el-button",{attrs:{size:"mini",type:"danger",title:"删除",icon:"el-icon-delete"},on:{click:function(r){return e.removeUser(t.row)}}}):e._e()]}}])})],2),r("div",{staticClass:"paging padding"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.users.length,"current-page":e.currentPage,"hide-on-single-page":!0},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),r("el-dialog",{attrs:{title:e.isEdit?"编辑用户":"添加用户",visible:e.addUserDialog,width:"450px","modal-append-to-body":!1},on:{"update:visible":function(t){e.addUserDialog=t},closed:e.cancel}},[r("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"name",label:"用户名"}},[r("el-input",{attrs:{disabled:"admin"===e.user.role||e.limit<=200,placeholder:"请输入用户名"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),r("el-form-item",{attrs:{prop:"password",label:"密码"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码","show-password":""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e.isEdit&&"admin"==e.user.role?e._e():r("el-form-item",{attrs:{prop:"role",label:"角色"}},[r("el-select",{attrs:{placeholder:"请选择",disabled:e.limit<=200},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}},[r("el-option",{attrs:{label:"上传者",value:"uploader"}}),r("el-option",{attrs:{label:"下载者",value:"downloader"}})],1)],1),r("el-form-item",{attrs:{prop:"phone",label:"手机号"}},[r("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),r("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.addUserDialog=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submit("form")}}},[e._v("确定")])],1)],1)],1)},i=[],a=(r("8e6e"),r("ac6a"),r("456d"),r("7f7f"),r("bd86")),s=r("6b6c"),o=r("f940"),l=r("b5ad"),c=r("a74e");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f={data:function(){return{columns:[{title:"用户名",minWidth:180,name:"name"},{title:"角色",name:"role",format:function(e){return{admin:"管理员",downloader:"下载者",uploader:"上传者"}[e]}},{title:"手机",width:180,name:"phone"},{title:"邮箱",width:200,name:"email"},{title:"创建时间",width:180,name:"created_at"},{title:"更新时间",width:180,name:"updated_at"}],users:[],currentPage:1,loading:!1,user:{name:"",password:"",phone:"",email:"",role:"admin"},addUserDialog:!1,rules:{name:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},isEdit:!1,limit:Object(c["a"])()}},methods:{listUsers:function(){var e=this;this.loading=!0,s["t"]({success:function(t){e.users=t.users?t.users.map((function(e){var t=e.id,r=e.username,n=e.password,i=e.role,a=e.phone,s=e.mail,o=e.created_at,c=e.updated_at;return{id:t,name:r,password:n,role:i,phone:a,email:s,created_at:Object(l["a"])(o),updated_at:Object(l["a"])(c)}})):[],e.loading=!1},fail:function(t){e.$message.error("获取用户失败, "+t),e.loading=!1}})},cancel:function(){this.addUserDialog=!1,this.reset()},reset:function(){this.$refs.form.resetFields(),this.user={name:"",password:"",phone:"",email:""}},addUser:function(){this.isEdit=!1,this.addUserDialog=!0},editUser:function(e){this.isEdit=!0,this.user=d({},e),this.addUserDialog=!0},submit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.saveUser()}))},saveUser:function(){var e=this,t=this.user,r=t.id,n=t.name,i=t.role,a=t.password,l=t.phone,c=t.email,u=Object(o["a"])({username:n,password:a,phone:l,mail:c}),d={success:function(t){e.addUserDialog=!1,e.listUsers()},fail:function(t){e.$message.error("操作失败, "+t)}};this.isEdit?(u.append("id",r),u.append("role",i),s["A"](u,d)):(u.append("role",i),s["d"](u,d))},removeUser:function(e){var t=this,r=e.id;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteUser(r)}))},deleteUser:function(e){var t=this;s["i"]({id:e},{success:function(e){t.listUsers()},fail:function(e){t.$message.error("获取用户失败, "+e)}})}},computed:{rows:function(){var e=10*(this.currentPage-1);return this.users.slice(e,e+10)}},mounted:function(){this.listUsers()}},p=f,m=r("2877"),b=Object(m["a"])(p,n,i,!1,null,null,null);t["default"]=b.exports},"454f":function(e,t,r){r("46a7");var n=r("584a").Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},"456d":function(e,t,r){var n=r("4bf8"),i=r("0d58");r("5eda")("keys",(function(){return function(e){return i(n(e))}}))},"46a7":function(e,t,r){var n=r("63b6");n(n.S+n.F*!r("8e60"),"Object",{defineProperty:r("d9f6").f})},"5eda":function(e,t,r){var n=r("5ca1"),i=r("8378"),a=r("79e5");e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*a((function(){r(1)})),"Object",s)}},"7f7f":function(e,t,r){var n=r("86cc").f,i=Function.prototype,a=/^\s*function ([^ (]*)/,s="name";s in i||r("9e1e")&&n(i,s,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},"85f2":function(e,t,r){e.exports=r("454f")},"8e6e":function(e,t,r){var n=r("5ca1"),i=r("990b"),a=r("6821"),s=r("11e9"),o=r("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){var t,r,n=a(e),l=s.f,c=i(n),u={},d=0;while(c.length>d)r=l(n,t=c[d++]),void 0!==r&&o(u,t,r);return u}})},9093:function(e,t,r){var n=r("ce10"),i=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},"990b":function(e,t,r){var n=r("9093"),i=r("2621"),a=r("cb7c"),s=r("7726").Reflect;e.exports=s&&s.ownKeys||function(e){var t=n.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},ac6a:function(e,t,r){for(var n=r("cadf"),i=r("0d58"),a=r("2aba"),s=r("7726"),o=r("32e9"),l=r("84f2"),c=r("2b4c"),u=c("iterator"),d=c("toStringTag"),f=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=i(p),b=0;b<m.length;b++){var h,g=m[b],v=p[g],w=s[g],y=w&&w.prototype;if(y&&(y[u]||o(y,u,f),y[d]||o(y,d,g),l[g]=f,v))for(h in n)y[h]||a(y,h,n[h],!0)}},bd86:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("85f2"),i=r.n(n);function a(e,t,r){return t in e?i()(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},f1ae:function(e,t,r){"use strict";var n=r("86cc"),i=r("4630");e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},f940:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("ac6a"),r("456d");var n=function(e){var t=new FormData;return Object.keys(e).map((function(r){t.append(r,e[r])})),t}}}]);
//# sourceMappingURL=chunk-2937903c.1894b33e.js.map