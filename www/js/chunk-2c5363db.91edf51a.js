(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c5363db"],{3798:function(t,e,s){"use strict";var r=s("a8cb"),i=s.n(r);i.a},a55b:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"layout"},[s("div",{staticClass:"header"},[t._v("资源管理 - 登录")]),s("el-form",{ref:"form",attrs:{model:t.login,rules:t.rules},nativeOn:{submit:function(t){t.preventDefault()}}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入用户名",disabled:t.loading},model:{value:t.login.username,callback:function(e){t.$set(t.login,"username",e)},expression:"login.username"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"el-icon-user"})])],2)],1),s("el-form-item",{staticStyle:{"margin-bottom":"12px"},attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码",disabled:t.loading,"show-password":""},model:{value:t.login.password,callback:function(e){t.$set(t.login,"password",e)},expression:"login.password"}},[s("template",{slot:"prepend"},[s("i",{staticClass:"el-icon-lock"})])],2)],1),s("div",{staticStyle:{"margin-bottom":"12px","text-align":"right"}},[s("router-link",{staticStyle:{color:"#409EFF"},attrs:{to:"/files"}},[t._v("文件中转")])],1),s("el-form-item",[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:12}},[s("el-button",{staticClass:"full-width",attrs:{type:"primary","native-type":"submit",loading:t.loading},on:{click:function(e){return t.submit("form")}}},[t._v("登录")])],1),s("el-col",{attrs:{span:12}},[s("el-button",{staticClass:"full-width",attrs:{disabled:t.loading},on:{click:function(e){return t.reset("form")}}},[t._v("重置")])],1)],1)],1)],1)],1)])},i=[],a=s("6b6c"),o=s("a74e"),n={data:function(){return{login:{username:"",password:""},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},loading:!1}},methods:{submit:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.toLogin()}))},toLogin:function(){var t=this;this.loading=!0,Object(a["u"])(this.login,{success:function(e){var s=e.token,r=e.token_type,i=e.user,a=i.id,n=i.username,l=i.role,u="admin"===l,c=u?1e3:"uploader"===l?200:50;Object(o["f"])({username:n,id:a,limit:c,token:s,tokentype:r}),t.$store.commit("setUserName",n),t.$store.commit("setUserLimit",c);var d="/index/";if(u||"uploader"===l){var p=t.$route.query.redirect;p&&(d=p)}else d="/proj";t.$router.push(d)},fail:function(e){t.$message.error(e),t.loading=!1}})},reset:function(t){this.$refs[t].resetFields()}},created:function(){var t=Object(o["a"])();Object(o["g"])()&&this.$router.push(t>100?"/index/":"/proj")}},l=n,u=(s("3798"),s("2877")),c=Object(u["a"])(l,r,i,!1,null,"79564dba",null);e["default"]=c.exports},a8cb:function(t,e,s){}}]);
//# sourceMappingURL=chunk-2c5363db.91edf51a.js.map