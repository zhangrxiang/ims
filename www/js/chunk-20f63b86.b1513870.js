(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20f63b86"],{"02ef":function(e,t,i){},"02f4":function(e,t,i){var r=i("4588"),n=i("be13");e.exports=function(e){return function(t,i){var o,a,l=String(n(t)),s=r(i),c=l.length;return s<0||s>=c?e?"":void 0:(o=l.charCodeAt(s),o<55296||o>56319||s+1===c||(a=l.charCodeAt(s+1))<56320||a>57343?e?l.charAt(s):o:e?l.slice(s,s+2):a-56320+(o-55296<<10)+65536)}}},"0390":function(e,t,i){"use strict";var r=i("02f4")(!0);e.exports=function(e,t,i){return t+(i?r(e,t).length:1)}},"0bfb":function(e,t,i){"use strict";var r=i("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d85":function(e,t,i){"use strict";var r=i("02ef"),n=i.n(r);n.a},"11e9":function(e,t,i){var r=i("52a7"),n=i("4630"),o=i("6821"),a=i("6a99"),l=i("69a8"),s=i("c69a"),c=Object.getOwnPropertyDescriptor;t.f=i("9e1e")?c:function(e,t){if(e=o(e),t=a(t,!0),s)try{return c(e,t)}catch(i){}if(l(e,t))return n(!r.f.call(e,t),e[t])}},"1af6":function(e,t,i){var r=i("63b6");r(r.S,"Array",{isArray:i("9003")})},"214f":function(e,t,i){"use strict";i("b0c5");var r=i("2aba"),n=i("32e9"),o=i("79e5"),a=i("be13"),l=i("2b4c"),s=i("520a"),c=l("species"),u=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();e.exports=function(e,t,i){var d=l(e),p=!o((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),h=p?!o((function(){var t=!1,i=/a/;return i.exec=function(){return t=!0,null},"split"===e&&(i.constructor={},i.constructor[c]=function(){return i}),i[d](""),!t})):void 0;if(!p||!h||"replace"===e&&!u||"split"===e&&!f){var m=/./[d],b=i(a,d,""[e],(function(e,t,i,r,n){return t.exec===s?p&&!n?{done:!0,value:m.call(t,i,r)}:{done:!0,value:e.call(i,t,r)}:{done:!1}})),v=b[0],g=b[1];r(String.prototype,e,v),n(RegExp.prototype,d,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},2770:function(e,t,i){"use strict";var r=i("e585"),n=i.n(r);n.a},"28a5":function(e,t,i){"use strict";var r=i("aae3"),n=i("cb7c"),o=i("ebd6"),a=i("0390"),l=i("9def"),s=i("5f1b"),c=i("520a"),u=i("79e5"),f=Math.min,d=[].push,p="split",h="length",m="lastIndex",b=4294967295,v=!u((function(){RegExp(b,"y")}));i("214f")("split",2,(function(e,t,i,u){var g;return g="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return i.call(n,e,t);var o,a,l,s=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,p=void 0===t?b:t>>>0,v=new RegExp(e.source,u+"g");while(o=c.call(v,n)){if(a=v[m],a>f&&(s.push(n.slice(f,o.index)),o[h]>1&&o.index<n[h]&&d.apply(s,o.slice(1)),l=o[0][h],f=a,s[h]>=p))break;v[m]===o.index&&v[m]++}return f===n[h]?!l&&v.test("")||s.push(""):s.push(n.slice(f)),s[h]>p?s.slice(0,p):s}:"0"[p](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)}:i,[function(i,r){var n=e(this),o=void 0==i?void 0:i[t];return void 0!==o?o.call(i,n,r):g.call(String(n),i,r)},function(e,t){var r=u(g,e,this,t,g!==i);if(r.done)return r.value;var c=n(e),d=String(this),p=o(c,RegExp),h=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(v?"y":"g"),w=new p(v?c:"^(?:"+c.source+")",m),y=void 0===t?b:t>>>0;if(0===y)return[];if(0===d.length)return null===s(w,d)?[d]:[];var x=0,k=0,S=[];while(k<d.length){w.lastIndex=v?k:0;var L,O=s(w,v?d:d.slice(k));if(null===O||(L=f(l(w.lastIndex+(v?0:k)),d.length))===x)k=a(d,k,h);else{if(S.push(d.slice(x,k)),S.length===y)return S;for(var D=1;D<=O.length-1;D++)if(S.push(O[D]),S.length===y)return S;k=x=L}}return S.push(d.slice(x)),S}]}))},"40c3":function(e,t,i){var r=i("6b4c"),n=i("5168")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(i){}};e.exports=function(e){var t,i,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=a(t=Object(e),n))?i:o?r(t):"Object"==(l=r(t))&&"function"==typeof t.callee?"Arguments":l}},"454f":function(e,t,i){i("46a7");var r=i("584a").Object;e.exports=function(e,t,i){return r.defineProperty(e,t,i)}},"456d":function(e,t,i){var r=i("4bf8"),n=i("0d58");i("5eda")("keys",(function(){return function(e){return n(r(e))}}))},"469f":function(e,t,i){i("6c1c"),i("1654"),e.exports=i("7d7b")},"46a7":function(e,t,i){var r=i("63b6");r(r.S+r.F*!i("8e60"),"Object",{defineProperty:i("d9f6").f})},"520a":function(e,t,i){"use strict";var r=i("0bfb"),n=RegExp.prototype.exec,o=String.prototype.replace,a=n,l="lastIndex",s=function(){var e=/a/,t=/b*/g;return n.call(e,"a"),n.call(t,"a"),0!==e[l]||0!==t[l]}(),c=void 0!==/()??/.exec("")[1],u=s||c;u&&(a=function(e){var t,i,a,u,f=this;return c&&(i=new RegExp("^"+f.source+"$(?!\\s)",r.call(f))),s&&(t=f[l]),a=n.call(f,e),s&&a&&(f[l]=f.global?a.index+a[0].length:t),c&&a&&a.length>1&&o.call(a[0],i,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(a[u]=void 0)})),a}),e.exports=a},"54a1":function(e,t,i){i("6c1c"),i("1654"),e.exports=i("95d5")},"5d73":function(e,t,i){e.exports=i("469f")},"5eda":function(e,t,i){var r=i("5ca1"),n=i("8378"),o=i("79e5");e.exports=function(e,t){var i=(n.Object||{})[e]||Object[e],a={};a[e]=t(i),r(r.S+r.F*o((function(){i(1)})),"Object",a)}},"5f1b":function(e,t,i){"use strict";var r=i("23c6"),n=RegExp.prototype.exec;e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var o=i.call(e,t);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},"6d34":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"data-filter",style:{width:e.wrapWidth+"px"}},[e._t("default"),i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入关键词"},model:{value:e.filter.keyword,callback:function(t){e.$set(e.filter,"keyword",t)},expression:"filter.keyword"}},[i("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.filter.type,callback:function(t){e.$set(e.filter,"type",t)},expression:"filter.type"}},[i("el-option",{attrs:{label:"标题",value:0}}),i("el-option",{attrs:{label:"描述",value:1}})],1),i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.onSubmit},slot:"append"})],1)],2)},n=[],o={data:function(){return{filter:{type:0,keyword:""}}},methods:{onSubmit:function(){this.$emit("filter",this.filter)}},computed:{wrapWidth:function(){return this.$slots.default?520:350}}},a=o,l=(i("c317"),i("0d85"),i("2877")),s=Object(l["a"])(a,r,n,!1,null,"2a75b48c",null);t["a"]=s.exports},"768b":function(e,t,i){"use strict";var r=i("a745"),n=i.n(r);function o(e){if(n()(e))return e}var a=i("5d73"),l=i.n(a),s=i("c8bb"),c=i.n(s);function u(e,t){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=l()(e);!(r=(a=s.next()).done);r=!0)if(i.push(a.value),t&&i.length===t)break}catch(err){n=!0,o=err}finally{try{r||null==s["return"]||s["return"]()}finally{if(n)throw o}}return i}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(e,t){return o(e)||u(e,t)||f()}i.d(t,"a",(function(){return d}))},"7cd6":function(e,t,i){var r=i("40c3"),n=i("5168")("iterator"),o=i("481b");e.exports=i("584a").getIteratorMethod=function(e){if(void 0!=e)return e[n]||e["@@iterator"]||o[r(e)]}},"7d7b":function(e,t,i){var r=i("e4ae"),n=i("7cd6");e.exports=i("584a").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},"7f7f":function(e,t,i){var r=i("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in n||i("9e1e")&&r(n,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},"85f2":function(e,t,i){e.exports=i("454f")},"8e6e":function(e,t,i){var r=i("5ca1"),n=i("990b"),o=i("6821"),a=i("11e9"),l=i("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(e){var t,i,r=o(e),s=a.f,c=n(r),u={},f=0;while(c.length>f)i=s(r,t=c[f++]),void 0!==i&&l(u,t,i);return u}})},9093:function(e,t,i){var r=i("ce10"),n=i("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},"95d5":function(e,t,i){var r=i("40c3"),n=i("5168")("iterator"),o=i("481b");e.exports=i("584a").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||o.hasOwnProperty(r(t))}},"990b":function(e,t,i){var r=i("9093"),n=i("2621"),o=i("cb7c"),a=i("7726").Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),i=n.f;return i?t.concat(i(e)):t}},a745:function(e,t,i){e.exports=i("f410")},aae3:function(e,t,i){var r=i("d3f4"),n=i("2d95"),o=i("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}},ac6a:function(e,t,i){for(var r=i("cadf"),n=i("0d58"),o=i("2aba"),a=i("7726"),l=i("32e9"),s=i("84f2"),c=i("2b4c"),u=c("iterator"),f=c("toStringTag"),d=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=n(p),m=0;m<h.length;m++){var b,v=h[m],g=p[v],w=a[v],y=w&&w.prototype;if(y&&(y[u]||l(y,u,d),y[f]||l(y,f,v),s[v]=d,g))for(b in r)y[b]||o(y,b,r[b],!0)}},b0c5:function(e,t,i){"use strict";var r=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},bd86:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var r=i("85f2"),n=i.n(r);function o(e,t,i){return t in e?n()(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},c317:function(e,t,i){"use strict";var r=i("f15e"),n=i.n(r);n.a},c8bb:function(e,t,i){e.exports=i("54a1")},e585:function(e,t,i){},eff4:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"resource"},[i("div",{staticClass:"actions"},[i("el-button",{attrs:{type:"success",icon:"el-icon-folder-add"},on:{click:e.addItem}},[e._v("添加资源")]),i("DataFilter",{on:{filter:e.filterData}},[i("el-select",{style:{marginRight:"10px"},attrs:{clearable:"",placeholder:"请选择资源分类"},model:{value:e.filter.alias,callback:function(t){e.$set(e.filter,"alias",t)},expression:"filter.alias"}},e._l(e.aliasList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"full-width",attrs:{data:e.rows,stripe:"",border:""},on:{"row-click":e.rowClick}},[e._l(e.columns,(function(t,r){return i("el-table-column",{key:r,attrs:{prop:t.name,label:t.title,width:t.width,"min-width":t.minWidth,"show-overflow-tooltip":!0,fixed:t.fixed,sortable:""},scopedSlots:e._u([{key:"default",fn:function(i){return[e._v("\n                "+e._s("alias"===t.name?e.aliasFilter(i.row[t.name]):t.format?t.format(i.row[t.name]):i.row[t.name])+"\n            ")]}}],null,!0)})})),i("el-table-column",{attrs:{label:"操作",width:"201",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",title:"升级/修复资源版本",type:"primary",circle:"",icon:"el-icon-upload"},on:{click:function(i){return e.upgradeItem(t.row)}}}),i("el-button",{attrs:{size:"mini",title:"下载资源",type:"success",circle:"",icon:"el-icon-download"},on:{click:function(i){return e.downloadItem(t.row)}}}),i("el-button",{attrs:{size:"mini",title:"回滚版本",type:"danger",circle:"",icon:"el-icon-back"},on:{click:function(i){return e.delVersion(t.row)}}}),i("el-button",{attrs:{size:"mini",title:"资源编辑",type:"warning",circle:"",icon:"el-icon-edit"},on:{click:function(i){return e.editItem(t.row)}}}),i("el-button",{attrs:{size:"mini",title:"资源删除",type:"danger",circle:"",icon:"el-icon-delete"},on:{click:function(i){return e.removeItem(t.row)}}})]}}])})],2),i("div",{staticClass:"paging padding"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.filterList.length,"current-page":e.currentPage,"hide-on-single-page":!0},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogShow,width:"450px","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogShow=t},closed:function(t){return e.cancel(e.isPub?"upgrade":"form")}}},[e.isPub?i("el-form",{ref:"upgrade",attrs:{model:e.file,rules:e.rules2,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"资源名称"}},[i("el-input",{attrs:{placeholder:"请输分类名称",disabled:""},model:{value:e.file.name,callback:function(t){e.$set(e.file,"name",t)},expression:"file.name"}})],1),i("el-form-item",{attrs:{label:"操作类型"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.versionType,callback:function(t){e.versionType=t},expression:"versionType"}},[i("el-option",{attrs:{label:"升级版本",value:1}}),i("el-option",{attrs:{label:"修复版本",value:2}})],1)],1),i("el-form-item",{attrs:{prop:"bin",label:"资源文件"},nativeOn:{click:function(t){return e.pickFile(t)}}},[i("el-input",{attrs:{placeholder:"点击选择一个文件",disabled:e.uploadProcessing},model:{value:e.file.bin,callback:function(t){e.$set(e.file,"bin",t)},expression:"file.bin"}}),i("div",{staticClass:"file-field"},[i("input",{ref:"file_field",attrs:{type:"file"},on:{change:e.setFile}})])],1),1==e.versionType?i("el-form-item",{attrs:{prop:"version",label:"资源版本"}},[i("el-input",{attrs:{placeholder:"0.0.0"===e.fileVersion?"请输入资源版本":"当前版本"+e.fileVersion,disabled:e.uploadProcessing},model:{value:e.file.version,callback:function(t){e.$set(e.file,"version",t)},expression:"file.version"}})],1):i("el-form-item",{attrs:{label:"资源版本"}},[i("el-input",{attrs:{placeholder:"0.0.0"===e.fileVersion?"请输入资源版本":"当前版本"+e.fileVersion,disabled:!0},model:{value:e.file.version,callback:function(t){e.$set(e.file,"version",t)},expression:"file.version"}})],1),i("el-form-item",{attrs:{prop:"log",label:"更新日志"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入更新日志",disabled:e.uploadProcessing},model:{value:e.file.log,callback:function(t){e.$set(e.file,"log",t)},expression:"file.log"}})],1)],1):i("el-form",{ref:"form",attrs:{model:e.file,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{prop:"name",label:"资源名称"}},[i("el-input",{attrs:{placeholder:"请输分类名称"},model:{value:e.file.name,callback:function(t){e.$set(e.file,"name",t)},expression:"file.name"}})],1),i("el-form-item",{attrs:{prop:"alias",label:"资源分类"}},[i("el-select",{attrs:{placeholder:"请选择资源分类"},model:{value:e.file.alias,callback:function(t){e.$set(e.file,"alias",t)},expression:"file.alias"}},e._l(e.aliasList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{prop:"desc",label:"资源描述"}},[i("el-input",{attrs:{placeholder:"请输入资源描述"},model:{value:e.file.desc,callback:function(t){e.$set(e.file,"desc",t)},expression:"file.desc"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.closeModal}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"small",loading:e.uploadProcessing&&e.isPub},on:{click:function(t){return e.submit(e.isPub?"upgrade":"form")}}},[e._v(e._s(e.uploadProcessing?"提交中...":e.isPub||e.isEdit?"保存":"下一步"))])],1)],1),i("el-drawer",{attrs:{title:"该资源列表",visible:e.drawer,size:"80%"},on:{"update:visible":function(t){e.drawer=t}}},[i("div",{staticStyle:{padding:"0 20px",height:"100%"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.versionLoading,expression:"versionLoading"}],attrs:{data:e.versionList,stripe:"",border:"",height:"90%"}},[e._l(e.versionColumns,(function(e,t){return i("el-table-column",{key:t,attrs:{prop:e.name,label:e.title,width:e.width,"min-width":e.minWidth,"show-overflow-tooltip":!0,formatter:e.format}})})),i("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",title:"修复资源",circle:"",type:"warning",icon:"el-icon-upload"},on:{click:function(i){return e.updateHistory(t.row)}}}),i("el-button",{attrs:{size:"mini",title:"下载资源",circle:"",type:"success",icon:"el-icon-download"},on:{click:function(i){return e.downloadItem(t.row)}}})]}}])})],2)],1),i("el-dialog",{attrs:{title:"修复资源",modal:!1,visible:e.fileDrawerShow,width:"450px"},on:{"update:visible":function(t){e.fileDrawerShow=t},closed:function(t){e.fileDrawerShow=!1}}},[i("el-form",{ref:"fileDrawer",attrs:{model:e.fileDrawer,rules:e.rules2,"label-width":"100px"}},[i("el-form-item",{attrs:{prop:"bin",label:"资源文件"},nativeOn:{click:function(t){return e.pickFile(t)}}},[i("el-input",{attrs:{placeholder:"点击选择一个文件",disabled:e.uploadProcessing},model:{value:e.fileDrawer.bin,callback:function(t){e.$set(e.fileDrawer,"bin",t)},expression:"fileDrawer.bin"}}),i("div",{staticClass:"file-field"},[i("input",{ref:"file_field",attrs:{type:"file"},on:{change:e.setFile}})])],1),i("el-form-item",{attrs:{label:"资源版本"}},[i("el-input",{attrs:{placeholder:"当前版本"+e.fileDrawer.version,disabled:!0},model:{value:e.fileDrawer.version,callback:function(t){e.$set(e.fileDrawer,"version",t)},expression:"fileDrawer.version"}})],1),i("el-form-item",{attrs:{prop:"log",label:"更新日志"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入更新日志",disabled:e.uploadProcessing},model:{value:e.fileDrawer.log,callback:function(t){e.$set(e.fileDrawer,"log",t)},expression:"fileDrawer.log"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.fileDrawerShow=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",size:"small",loading:e.uploadProcessing},on:{click:e.submitDrawer}},[e._v("保存")])],1)],1)],1)],1)},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),a=(i("7f7f"),i("28a5"),i("768b")),l=i("6b6c"),s=i("a74e"),c=i("b5ad"),u=i("f940"),f=[{title:"资源名称",minWidth:150,name:"name",fixed:!0},{title:"分类",width:80,minWidth:60,name:"alias"},{title:"文件名",minWidth:150,name:"bin",format:function(e){return e||"无文件"}},{title:"资源描述",minWidth:180,name:"desc"},{title:"更新日志",minWidth:150,name:"log",format:function(e){return e||"暂无"}},{title:"版本",width:100,minWidth:80,name:"version",format:function(e){return""===e?"未发布":e}},{title:"下载次数",width:120,name:"download"},{title:"创建时间",width:180,name:"created_at"},{title:"更新时间",width:180,name:"updated_at"}],d=[{title:"文件名",minWidth:150,name:"file"},{title:"版本号",minWidth:100,name:"version"},{title:"日志",minWidth:150,name:"log"},{title:"上传者",minWidth:80,name:"username"},{title:"上传时间",minWidth:150,name:"created_at",format:function(e){return Object(c["a"])(e.created_at)}},{title:"下载",minWidth:50,name:"download"}],p=i("6d34");function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(i,!0).forEach((function(t){Object(o["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b="0.0.0",v={data:function(){return{columns:f,versionColumns:d,list:[],filterList:[],filter:{alias:""},currentPage:1,aliasList:[],isEdit:!1,dialogTitle:"",dialogShow:!1,file:{id:"",name:"",alias:"",bin:"",version:"",desc:"",log:""},fileDrawer:{id:"",bin:"",version:"",log:"",resource_id:""},bin:null,isPub:!1,rules:{name:[{required:!0,message:"资源名称不能为空",trigger:"blur"}],alias:[{required:!0,message:"指定一个资源分类",trigger:"change"}],desc:[{required:!0,message:"资源描述不能为空",trigger:"blur"}]},rules2:{bin:[{required:!0,message:"选择一个文件",trigger:"change"}],version:[{required:!0,message:"资源版本不能为空",trigger:"blur"},{validator:function(e,t,i){var r=/^\d+\.\d+\.\d+$/;r.test(t)?i():i(new Error("请输入合法的版本号, 例如 x.x.x "))},trigger:"blur"},{validator:function(e,t,i){var r=t.split("."),n=Object(a["a"])(r,3),o=n[0],l=n[1],s=n[2],c=b.split("."),u=Object(a["a"])(c,3),f=u[0],d=u[1],p=u[2],h=function(e){return parseInt(e)};h(o)>h(f)||h(o)===h(f)&&h(l)>h(d)||h(o)===h(f)&&h(l)===h(d)&&h(s)>h(p)?i():i(new Error("发布的版本号不能低于当前版本号, 当前版本号 "+b))},trigger:"blur"}]},uploadProcessing:!1,loading:!1,fileVersion:b,versionType:1,drawer:!1,versionLoading:!1,versionList:[],fileDrawerShow:!1,fileDrawerLoading:!1}},components:{DataFilter:p["a"]},methods:{listResource:function(){var e=this;this.loading=!0,l["s"](null,{success:function(t){e.filterList=e.list=t?t.map((function(e){var t=e.id,i=e.name,r=e.type,n=e.file,o=e.desc,a=e.log,l=e.version,s=e.download,u=e.created_at,f=void 0===u?"":u,d=e.updated_at,p=void 0===d?"":d;return{id:t,name:i,alias:r,bin:n,desc:o,log:a,version:l,download:s,created_at:Object(c["a"])(f),updated_at:Object(c["a"])(p)}})):[],e.loading=!1},fail:function(t){e.$message.error("获取资源列表失败, "+t),e.loading=!1}})},listAlias:function(e){var t=this;l["n"]({success:function(i){t.aliasList=i.resource_types?i.resource_types.map((function(e){return{id:e.id,name:e.name}})):[],e()},fail:function(e){t.$message.error("获取资源分类失败, "+e)}})},addItem:function(){this.dialogTitle="添加资源",this.isEdit=!1,this.dialogShow=!0},editItem:function(e){var t=e.id,i=e.name,r=e.alias,n=e.desc;this.dialogTitle="编辑资源",this.isEdit=!0,this.file=m({},this.file,{},{id:t,name:i,alias:r,desc:n}),this.dialogShow=!0},closeModal:function(){this.dialogShow=!1},historyItem:function(){},upgradeItem:function(e){var t=e.id,i=e.name,r=e.version,n=e.alias,o=e.desc;this.isPub=!0,this.dialogTitle="升级/修复资源版本",this.file=m({},this.file,{},{id:t,name:i,alias:n,desc:o}),b=this.fileVersion=r,this.dialogShow=!0},pickFile:function(e){var t=this.$refs.file_field;t.click(),setTimeout((function(){e.target.blur()}),100)},setFile:function(e){var t=e.target.files;console.log(t),t.length>0?this.fileDrawerShow?(this.bin=t[0],this.fileDrawer.bin=t[0].name):(this.bin=t[0],this.file.bin=t[0].name):this.bin=null},cancel:function(e){this.reset(e),this.isPub=!1,this.isEdit=!1,b=this.fileVersion="0.0.0"},reset:function(e){this.file={name:"",alias:"",bin:"",version:"",desc:"",log:""},this.bin=null,this.$refs[e].resetFields()},submit:function(e){var t=this;this.$refs[e].validate((function(i){if(!i)return!1;"form"===e?t.saveFile():"upgrade"===e&&t.upgradeResource()}))},upgradeResource:function(){var e=this;this.uploadProcessing=!0;var t={success:function(t){e.dialogShow=!1,e.upgradeFileDialog=!1,e.uploadProcessing=!1,e.listResource(),e.bin=null},fail:function(t){e.uploadProcessing=!1,e.$message.error("操作失败, "+t),e.bin=null}},i=this.file,r=i.id,n=i.name,o=i.desc,a=(i.alias,i.version),s=i.log,c=Object(u["a"])({name:n,desc:o});c.append("resource_id",r),c.append("file",this.bin),c.append("log",s),1==this.versionType?(c.append("version",a),l["C"](c,t)):l["w"](c,t)},saveFile:function(){var e=this,t={success:function(t){var i=t.id;e.isEdit?(e.dialogShow=!1,e.listResource()):(e.isPub=!0,e.file.id=i,e.dialogTitle="更新资源版本")},fail:function(t){e.$message.error("操作失败, "+t)}},i=this.file,r=i.id,n=i.name,o=i.desc,a=i.alias,s=Object(u["a"])({name:n,type:a,desc:o});this.isEdit?(s.append("id",r),l["z"](s,t)):l["c"](s,t)},removeItem:function(e){var t=this;this.$confirm("此操作将永久删除该资源, 是否继续?","提示",{type:"warning"}).then((function(){t.deleteResource(e.id)}))},deleteResource:function(e){var t=this;l["h"]({id:e},{success:function(e){t.listResource()},fail:function(e){t.$message.error("获取资源失败, "+e)}})},aliasFilter:function(e){var t=this.aliasList.filter((function(t){return t.id===e}));return t.length?t[0].name:"未分类"},filterData:function(e){var t=e.type,i=e.keyword,r=this.filter.alias,n=i.toLocaleLowerCase();this.filterList=this.list.filter((function(e){return(""===r||e.alias===r)&&e[0===t?"name":"desc"].toLocaleLowerCase().indexOf(n)>-1}))},downloadItem:function(e){var t=e.id,i=e.version,r=e.file,n=e.resource_id,o=document.createElement("a");this.drawer?o.href=l["l"]()+"resource/download?id="+n+"&version="+i+"&token="+Object(s["b"])():o.href=l["l"]()+"resource/download?id="+t+"&version="+i+"&token="+Object(s["b"])(),o.download=r,o.click()},rowClick:function(e,t){"name"==t.property&&(this.drawer=!0,this.getVersionList(e.id))},getVersionList:function(e){var t=this;this.versionLoading=!0,l["m"]({resource_id:e},{success:function(e){t.versionLoading=!1,t.versionList=e.resources},fail:function(e){t.versionLoading=!1,t.$message.error(e)}})},delVersion:function(e){var t=this,i=e.id;this.$confirm("此操作将回退到上一版本, 是否继续?","提示",{type:"warning"}).then((function(){console.log(i),l["e"]({resource_id:i},{success:function(e){t.listResource()},fail:function(e){t.$message.error(e)}})}))},updateHistory:function(e){var t=e.version,i=e.resource_id,r=e.id;this.fileDrawerShow=!0,this.fileDrawer.resource_id=i,this.fileDrawer.id=r,this.fileDrawer.version=t},submitDrawer:function(){var e=this;this.$refs.fileDrawer.validate((function(t){if(!t)return!1;e.uploadProcessing=!0;var i=e.fileDrawer,r=i.id,n=i.version,o=i.log,a=i.resource_id,s=Object(u["a"])({version:n,resource_id:a,log:o,id:r});s.append("file",e.bin),l["w"](s,{success:function(t){e.bin=null,e.uploadProcessing=!1,e.fileDrawerShow=!1,e.getVersionList(e.fileDrawer.resource_id)},fail:function(t){e.$message.error(err),e.uploadProcessing=!1,e.fileDrawerShow=!1}})}))}},computed:{rows:function(){var e=10*(this.currentPage-1);return this.filterList.slice(e,e+10)}},mounted:function(){this.listAlias(this.listResource)}},g=v,w=(i("2770"),i("2877")),y=Object(w["a"])(g,r,n,!1,null,"f244d7c2",null);t["default"]=y.exports},f15e:function(e,t,i){},f1ae:function(e,t,i){"use strict";var r=i("86cc"),n=i("4630");e.exports=function(e,t,i){t in e?r.f(e,t,n(0,i)):e[t]=i}},f410:function(e,t,i){i("1af6"),e.exports=i("584a").Array.isArray},f940:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("ac6a"),i("456d");var r=function(e){var t=new FormData;return Object.keys(e).map((function(i){t.append(i,e[i])})),t}}}]);
//# sourceMappingURL=chunk-20f63b86.b1513870.js.map